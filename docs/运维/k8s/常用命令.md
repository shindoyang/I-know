#### kubectl 常用命令

#### 1.查看资源对象

常用查看资源对象<rc> 有namespace(ns)、pods、service(svc)、endpoints(ep)、deployment(deploy)、pvc、ingress(ing)，括号内为最简写法。

```shell
# kubectl get <rc>
```

显示更多信息，在命令后面接 **-o  wide** ,  **-o  json**  或者  **-o  yaml** ， 同时查看多个资源对象用英文逗号隔开。

```shell
# kebectl get pods <pod-name> -o wide
```

查看资源对象全名（主要是前面加上资源类型），可通过kubectl  rc,<rc>  命令

对比如下：

![image-20200923160035213](常用指令.assets/image-20200923160035213.png)

使用rc之后：

![image-20200923160105671](常用指令.assets/image-20200923160105671.png)

对比svc

![image-20200923160129598](常用指令.assets/image-20200923160129598.png)



#### 2.创建资源对象

创建时，注意文件内是否有namespace，如果没有，请在命令后面指定 -n <namespace-name>

根据yaml配置文件一次性创建资源对象

```shell
# kubectl create -f service.yaml -f deployment.yaml
```

根据<directory>目录下所有的 .yaml、.yml、.json文件的定义进行创建操作

```shell
# kubectl create -f <directory>
```



对资源进行配置，最常用功能。

```shell
# kubectl apply -f service.yaml
或者
# kubectl apply -f <directory>
```

#### 3.编辑资源对象

编辑资源对象时，编辑器为**vi**，需要熟悉vi 命令操作

```shell
# kubectl edit deploy <deployment-name>
```

如果平常是使用yaml文件维护，注意下次修改时的配置。

#### 4.描述资源对象

显示service的详细信息

```shell
# kubectl describe svc <service-name>
```

![image-20200923163136582](常用指令.assets/image-20200923163136582.png)

显示pod的详细信息，其中显示的pod启动过程时间可以帮助拍错。

```shell
# kubectctl describe pods/<pod-name>
```

![image-20200923163032438](常用指令.assets/image-20200923163032438.png)

#### 5.删除资源对象

类似**create**命令用法

基于deployment.yaml 定义的名称删除deployment

```shell
# kubectl delete -f deployment.yaml
```

根据<directory>目录下所有 .yaml、.yml、.json文件的定义进行创建删除

```shell
# kubectl delete -f <directory>
```

删除所有包含某个label 的pod 和 service

```shell
# kubectl delete pods,svc -l name=<label-name>
```

6.执行容器的命令

执行pod 的 ls 命令，默认是用pod中的第一个容器执行

```shell
# kubectl exec -it <pod-name> --ls 
```

指定pod中某个容器执行 ls  命令

```shell
# kubectl exec <pod-name> -c <container-name> ls
```

登录容器（容器中命令存在时）

```shell
# kubectl exec -it <pod-name> /bin/sh 
或者
# kubectl exec -it <pod-name> /bin/bash
```











