## sso

目前单点登录的落地方案

网关与oauth配合，之前一直不明白为什么这样可以实现单点登录，多域名的时候是怎么兼容。其实很简单：

只要把多个都要实现单点登录的域名都指到同一个sso网关上就可以了。

所以后面，压力全部都在sso网关的oauth服务上，

当时oauth可以使用springsession（加上jdbc的AuthorizationCode方案） 或者redisTokenStore 来实现水平伸缩来降低压力。

但是，要看下sso网关如果水平伸缩后，原来的sso是否可行。--结论：验证不行，oauth响应的时候，无法保证整个授权链路都是固定与某个网关容器交互，会出现会话不完整或错乱的问题。导致sso认证失败。

nginx的负载均衡策略是轮询机制。为了解决上述问题，可以尝试下请求转发的时候根据ip - hash 





