### 请求头大小限制

jetty默认请求头大小8k

nginx默认请求头大小4k

#### 修改方案

1. 修改nginx请求头大小限制

   ![Image](基础配置.assets/Image-1604547443871.png)

> 参考资料：
>
> https://nginx.org/en/docs/http/ngx_http_core_module.html#large_client_header_buffers
> https://www.cnblogs.com/antflow/p/7509680.html
> https://www.cnblogs.com/jpfss/p/10237624.html

1. 修改web容器请求头大小限制

```yaml
改jetty依赖（可以不改）：
        <!--<dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-jetty</artifactId>
        </dependency>-->

改yml配置：（需要网关和容器一起改）
server:
  port: 81
  max-http-header-size: 15000
```

如果只是网关放开，容器没放开，也是不行的：

![Image](基础配置.assets/Image.png)

> 注意：如果是springcloud微服务框架，因基于springboot，使用内置的web服务器。需要全链路修改请求头限制。
>
> 参考资料：
>
> https://stackoverflow.com/questions/57889575/how-to-set-max-http-header-size-in-spring-boot-2-x-application
>
> springboot官方资料：https://docs.spring.io/spring-boot/docs/current/reference/html/appendix-application-properties.html
>
> https://github.com/spring-projects/spring-boot/issues/13831

### 请求体大小限制

tomcat默认请求体大小：2m

nginx默认请求体大小：1m

#### 修改方案

1. 修改nginx请求体大小限制
2. 修改web容器请求体大小限制

> 注意：如果是springcloud微服务框架，因基于springboot，使用内置的web服务器。需要全链路修改请求体限制。
>
> 参考资料：
>
> 